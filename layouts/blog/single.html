<!DOCTYPE html>
<html lang="en" class="bit-auto">
  <head>
    {{ partial "head.html" . }}
  </head>
  <body>
    {{ partial "nav.html" . }}
    <main class="bit-auto">
      <h1>
        <a href="#">{{ .Title }}</a>
      </h1>
      <p>{{ .Date.Format "January 02, 2006" }}</p>

      {{ .Content }}

    <script type="module">
      // I would prefer to generate links for my h2 and h3 elements at build time,
      // but I can't figure out a good way to make Jekyll do that, sadly
      function slug(text) {
        return text
          .trim()
          .toLowerCase()
          .replace(/\'/gi, "")
          .replace(/[^a-z0-9]/gi, "-")
          .replace(/-{2,}/g, "-")
          .replace(/^-+|-+$/gm, "")
          .substring(0, 64);
      }

      for (const h of document.querySelectorAll("h2, h3")) {
        h.id = h.id || slug(h.textContent);
        h.innerHTML = "<a href='#" + h.id + "'>" + h.innerHTML + "</a>";
      }
    </script>
    {{ partial "footer.html" . }}
  </body>
</html>
